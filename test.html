<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Price Calculator</title>
    <!-- link font resources -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
    <style>
		.cologne-map {
            display: flex;
			position: absolute;
			transform: scale(1.0);
		}
		.cologne-map img {
			pointer-events: none;
			position: static;
		}
		.cologne-map svg {
			position: absolute;
		}
		.price-calculator-table {
		  position: relative;
		  font-family: "Manrope", sans-serif;
		  border-collapse: collapse;
		  table-layout: fixed;
		  width: 200px;
		  left: 1010px
		}
		td {
		  border: 1px solid rgb(52, 54, 103);
		  text-align: left;
		  padding: 5px;
		  height: 25px;
		}
		th {
		  text-align: left;
		  padding: 5px;
		  height: 25px;
		}
    </style>
</head>

<body>
    <var id="highlightedArea"></var>
    <var id="senderArea"></var>
    <var id="receiverArea"></var>
	<div class="cologne-map">
		<svg viewBox="0 0 1000 733">
			<polygon opacity="0" points="366,422 369,400 374,381 381,366 389,352 397,340 408,328 425,313 478,359 464,372 458,379 451,391 446,405 443,421" class="Ehrenfeld"/>
			<polygon opacity="0" points="590,352 609,363 620,373 632,387 639,400 643,414 645,430 643,449 638,463 630,476 621,487 609,497 594,506 576,513 587,357" class="Deutz"/>
			<polygon opacity="0" points="528,188 529,88 555,90 579,95 602,101 626,109 645,118 666,129 643,213 622,204 599,197 576,192 544,188" class="merkenich"/>
		</svg>
		<img src=".\resources\syndi.jpg" alt="Cologne Map">
	</div>
	<table class="price-calculator-table">
	  <tr>
		<th>Origin:</th>
	  </tr>
	  <tr>
		<td id="table-origin"></td>
	  </tr>
	  <tr>
		<th>Destination:</th>
	  </tr>
	  <tr>
		<td id="table-destination"></td>
	  </tr>
	  <tr>
		<th>Price:</th>
	  </tr>
	  <tr>
		<td id="table-price"></td>
	  </tr>
	</table>
</body>

<script>
	const pricesMap = new Map([["Ehrenfeld::Ehrenfeld", "14€"],
							   ["Ehrenfeld::Deutz", "18.5€"],
							   ["Deutz::Deutz", "14.5€"],
							   ["Deutz::Ehrenfeld", "18.5€"]]);
	const areaNames = ["Ehrenfeld", "Deutz", "None"];	
	const senderArea = document.getElementById('senderArea');
	const receiverArea = document.getElementById('receiverArea');
	const highlightedArea = document.getElementById('highlightedArea');
	senderArea.value = "None";
	receiverArea.value = "None";
	highlightedArea.value = "None";	
	areaNames.forEach((areaName) => {
		var area = document.querySelector('.' + areaName);
		if (area == null) {
			return;
		}
		area.addEventListener('mouseenter', () => {
			<!-- highlight area -->
			if (senderArea.value == areaName || receiverArea.value == areaName) {
				return;
			}
			area.style.fill = "rgb(52, 54, 103)";
			area.style.opacity = .5;
			highlightedArea.value = areaName;		
		});	
		area.addEventListener('mouseleave', () => {
			<!-- unhighlight area -->
			if (senderArea.value == areaName || receiverArea.value == areaName) {
				return;
			}
			area.style.opacity = 0;
			highlightedArea.value = "None";
		});
		area.addEventListener('click', () => {
			if (senderArea.value != "None" && receiverArea.value != "None") {
				if (receiverArea.value == areaName) {
					<!-- unset destination -->
					area.style.opacity = 0.0;
					receiverArea.value = "None";
					document.getElementById("table-destination").innerHTML = "";
					document.getElementById("table-price").innerHTML = "";
					return;
				} 
				<!-- unset origin and destination -->
				document.querySelector('.' + senderArea.value).style.opacity = 0.0;
				document.querySelector('.' + receiverArea.value).style.opacity = 0.0;
				senderArea.value = "None";
				receiverArea.value = "None";
				document.getElementById("table-origin").innerHTML = "";
				document.getElementById("table-destination").innerHTML = "";
				document.getElementById("table-price").innerHTML = "";
				return;
			}
			else if (senderArea.value == areaName) {
				<!-- unset origin -->
				area.style.opacity = 0.0;
				senderArea.value = "None";
				document.getElementById("table-origin").innerHTML = "";
				document.getElementById("table-destination").innerHTML = "";
				document.getElementById("table-price").innerHTML = "";
				return;
			}
			else if (senderArea.value == "None") {
				<!-- set origin -->
				area.style.fill = "rgb(255, 233, 127)";
				area.style.opacity = .5;
				senderArea.value = areaName;
				document.getElementById("table-origin").innerHTML = areaName;
				document.getElementById("table-destination").innerHTML = areaName;
				document.getElementById("table-price").innerHTML 
					= pricesMap.get(areaName + "::" + areaName);			
				return;
			}
			<!-- set destination -->
			area.style.fill = "rgb(255, 127, 127)";
			area.style.opacity = .5;
			receiverArea.value = areaName;
			document.getElementById("table-destination").innerHTML = areaName;
			document.getElementById("table-price").innerHTML
				= pricesMap.get(senderArea.value + "::" + areaName);
		});
	});
</script>
</html>
